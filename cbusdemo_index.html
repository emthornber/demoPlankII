<!-- CANWEB CBUS Demo HTML
	05 April, 2022 - E M Thornber
	Created from cbusdemo_index.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>CANWEB CBUS Demo Layout</title>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
</head>
<meta charset="utf-8">
<link href="cbusdemo.css" rel="stylesheet" type="text/css">
<script src="cbusdemo.js"></script>
<script>
    // -------------------------------------------
    // Global setup
    systext = new scrolltext('systext', 22); // Create a store for system text
    syshide = true;                         // Initially hide system text
    simmode = true;                         // Set initial simulation mode
    stopdir = true;                         // Stop before changing direction
    maxrows = 6;                            // Max rows for selection box
    maxfunc = 10;                           // Maximum number of loco function keys
    // -------------------------------------------
</script>
<body>
<div class="cont" style="width:800px;left:0px;top:0px;">
    <div class="panl" style="height:480px;">
        <!-- The main track drawing -->
        <img alt="Track Layout" class="pdwg" src="cbusdemoTrack.svg" style="left:0px;top:0px;">
        <!-- Software version -->
        <div class="psys" id="sysvers" style="color:GhostWhite;left:605px;top:2px;font-size:12px;"></div>
        <!-- The system text can display the log -->
        <div class="psys" id="systext" style="left:5px;top:10px;height:420px;width:780px;"></div>
        <!-- The status box displays the time/date or connection status -->
        <div class="ptxt" id="status" onclick="statusclick();" style="left:0px;top:420px;width:800px;height:40px;">
            Connecting...
        </div>
        <!-- Define layout control buttons -->
        <div class="gbut0" style="left:5px;top:380px;">
            <div class="gbut1" onclick="sendonevent('9');">Start of Day</div>
        </div>
        <div class="gbut0" style="left:160px;top:380px;">
            <div class="gbut1">Test</div>
            <div class="gbut2"><img alt="Testing" id="e8" onclick="sendtoggle('8');" src="cwgbutr0.png"></div>
        </div>
        <div class="gbut0" style="left:315px;top:380px;">
            <div class="gbut1">Aux Func</div>
            <div class="gbut2"><img alt="Aux Function ON" id="e95" onclick="sendtoggle('95');" src="cwgbutg0.png"></div>
        </div>
        <div class="gbut0" style="left:470px;top:380px;">
            <div class="gbut1">Simulate</div>
            <div class="gbut2"><img alt="Simulating" id="a0" onclick="simbutton();" src="cwgbutg0.png"></div>
        </div>
        <div class="sbut0" style="left:625px;top:315px;">
            <div class="sbut3"><b>Stop<br>All</b></div>
            <div class="sbut2"><img alt="All Locos stopped" id="a1" onclick="auxtoggle('1');" src="cwsbutr0.png"></div>
        </div>
        <!-- TURNBACK -->
        <!-- ToTI -->
        <img alt="Track Circuit" title="ToTI N5E3" class="ptot" id="e5-3" onclick="simtoggle('5-3');" src="TrackCircuit0.svg"
             style="left:   0px;top:180px;">
        <img alt="Track Circuit" title="ToTI N5E3" class="ptot" id="e5-3a" onclick="simtoggle('5-3');" src="TrackCircuit0.svg"
             style="left:  60px;top:180px;">
        <img alt="Track Circuit" title="ToTI N5E3" class="ptot" id="e5-3b" onclick="simtoggle('5-3');" src="TrackCircuit0.svg"
             style="left: 120px;top:180px;">
        <!-- Shunt Limit -->
        <img alt="Stop Board" title="Spot N5E3" class="ptot" id="e5-4" onclick="simtoggle('5-4');" src="StopBoard0.svg"
             style="left: 0px;top:180px;">
        <!-- Turnout Control -->
        <img alt="101" class="pbkg" src="Turnout101.svg"
             style="left:360px;top:0px;">
        <img alt="Knob" title="Turnback" class="ptot" id="e1-1" onclick="sendtoggle('1-1');" src="Knob0.svg"
             style="left:360px;top:0px;">
        <img alt="Lamp" title="Turnback Normal"  class="ptot" id="e5-6a" onclick="simtoggle('66-8', '5-6');" src="Lamp0.svg"
             style="left:360px;top:0px;">
        <img alt="Lamp" title="Turnback Reverse" class="ptot" id="e5-5a" onclick="simtoggle('66-6', '5-5');" src="Lamp0.svg"
             style="left:390px;top:0px;">
        <!-- Turnout Feedback -->
        <img alt="TurnoutWyeLeftGrey" class="pbkg" src="TurnoutWyeLeftGrey.svg"
             style="left:180px;top:180px;">
        <img alt="Wye Turnout" title="Turnout N1E1" class="ptot" id="e5-5" onclick="simtoggle('5-5');" src="TurnoutWyeLeftDn0.svg"
             style="left: 180px;top:180px;">
        <img alt="Wye Turnout" title="Turnout N1E1" class="ptot" id="e5-6" onclick="simtoggle('5-6');" src="TurnoutWyeLeftUp0.svg"
             style="left: 180px;top:180px;">
        <!-- Up Junction -->
        <!-- ToTI -->
        <img alt="Track Circuit" title="ToTI N5E2" class="ptot" id="e5-2" onclick="simtoggle('5-2');" src="TrackCircuit0.svg"
             style="left: 240px;top:120px;">
        <img alt="Track Circuit" title="ToTI N5E2" class="ptot" id="e5-2a" onclick="simtoggle('5-2');" src="TrackCircuit0.svg"
             style="left: 300px;top:120px;">
        <!-- Turnout Clipped OOU -->
        <img alt="Wye Turnout" title="T/O OOU" class="ptot" src="TurnoutWyeRightDnWhite.svg"
             style="width:60px;height:60px;left:180px;top:120px;">
        <!-- Down Junction -->
        <!-- ToTI -->
        <img alt="Track Circuit" title="ToTI N5E1" class="ptot" id="e5-1" onclick="simtoggle('5-1');" src="TrackCircuit0.svg"
             style="left: 240px;top:240px;">
        <img alt="Track Circuit" title="ToTI N5E1" class="ptot" id="e5-1a" onclick="simtoggle('5-1');" src="TrackCircuit0.svg"
             style="left: 300px;top:240px;">
        <!-- Turnout Clipped OOU -->
        <img alt="Wye Turnout" title="T/O OOU" class="ptot" src="TurnoutWyeRightUpWhite.svg"
             style="width:60px;height:60px;left:180px;top:240px;">
        <!-- STATION -->
        <!-- Up ToTI -->
        <img alt="Track Circuit" title="ToTI N6E2" class="ptot" id="e6-2" onclick="simtoggle('6-2');" src="TrackCircuit0.svg"
             style="left: 360px;top:120px;">
        <img alt="Track Circuit" title="ToTI N6E2" class="ptot" id="e6-2a" onclick="simtoggle('6-2');" src="TrackCircuit0.svg"
             style="left: 420px;top:120px;">
        <!-- Up Platform Stop -->
        <img alt="Stop Board" title="Spot N6E3" class="ptot" id="e6-3" onclick="simtoggle('6-3');" src="StopBoard0.svg"
             style="left: 420px;top:120px;">
        <!-- Down ToTI -->
        <img alt="Track Circuit" title="ToTI N6E1" class="ptot" id="e6-1" onclick="simtoggle('6-1');" src="TrackCircuit0.svg"
             style="left: 360px;top:240px;">
        <img alt="Track Circuit" title="ToTI N6E1" class="ptot" id="e6-1a" onclick="simtoggle('6-1');" src="TrackCircuit0.svg"
             style="left: 420px;top:240px;">
        <!-- Down Platform Stop -->
        <img alt="Stop Board" title="Spot N6E4" class="ptot" id="e6-4" onclick="simtoggle('6-4');" src="StopBoard0.svg"
             style="left: 360px;top:240px;">
        <!-- Fiddle Yard -->
        <!-- ToTI -->
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3" onclick="simtoggle('7-3');" src="TrackCircuitSW0.svg"
             style="left: 480px;top:120px;">
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3a" onclick="simtoggle('7-3');" src="TrackCircuitNE0.svg"
             style="left: 480px;top:180px;">
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3b" onclick="simtoggle('7-3');" src="TrackCircuit0.svg"
             style="left: 480px;top:240px;">
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3c" onclick="simtoggle('7-3');" src="TrackCircuitSW0.svg"
             style="left: 540px;top:180px;">
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3d" onclick="simtoggle('7-3');" src="TrackCircuit0.svg"
             style="left: 600px;top:240px;">
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3e" onclick="simtoggle('7-3');" src="TrackCircuit0.svg"
             style="left: 660px;top:240px;">
        <img alt="Track Circuit" title="ToTI N7E3" class="ptot" id="e7-3f" onclick="simtoggle('7-3');" src="TrackCircuit0.svg"
             style="left: 720px;top:240px;">
        <!-- Shunt Limit -->
        <img alt="Stop Board" title="Spot N7E3" class="ptot" id="e7-4" onclick="simtoggle('7-4');" src="StopBoard0.svg"
             style="left: 720px;top:240px;">
        <!-- Turnout Control -->
        <img alt="102" class="pbkg" src="Turnout102.svg"
             style="left:420px;top:0px;">
        <img alt="Knob" title="Fiddleyard" class="ptot" id="e1-13" onclick="sendtoggle('1-13');" src="Knob0.svg"
             style="left:420px;top:0px;">
        <img alt="Lamp" title="Fiddleyard Normal"  class="ptot" id="e7-1a" onclick="simtoggle('66-48', '7-1');" src="Lamp0.svg"
             style="left:420px;top:0px;">
        <img alt="Lamp" title="Fiddleyard Reverse" class="ptot" id="e7-2a" onclick="simtoggle('66-46', '7-2');" src="Lamp0.svg"
             style="left:450px;top:0px;">
        <!-- Turnout Feedback -->
        <img alt="TurnoutRightGrey" class="pbkg" src="TurnoutRightGrey.svg"
             style="left: 540px;top:240px;">
        <img alt="Right Turnout" title="Turnout N1E13" class="ptot" id="e7-1" onclick="simtoggle('7-1');" src="TurnoutRightNormal0.svg"
             style="left: 540px;top:240px;">
        <img alt="Right Turnout" title="Turnout N1E13" class="ptot" id="e7-2" onclick="simtoggle('7-2');" src="TurnoutRightReverse0.svg"
             style="left: 540px;top:240px;">
    </div>
    <!-- Throttle 1 ('x') -->
    <div class="throt">
        <div class="tsel" onclick="locoselectclick('x');">
            <img class="tsel0" id="locix" src="loco_none.png">
            <div class="tsel1" id="locox"><b>Select Loco</b></div>
            <div class="tsel2" id="addrx"></div>
        </div>
        <div class="tgaph"></div>
        <div class="tdir" id="bx29">
            <div class="tdir1"><img id="fx29" src="Direction0.png" onclick="locodirectionclick('x',true);"></div>
            <div class="tdir2" id="lspdx">0</div>
        </div>
        <div class="tgaph"></div>
        <div class="tspd" id="bx31">
            <input id="speedx" style="height:100%;width:100%;background-color:oldlace;" min="0" max="128" oninput="locospeedchange('x',this.value)" type="range">
        </div>
        <table class="tfnc">
            <tr>
                <td class="tfnc1" id="bx0">
                    <div class="tfnc2">
                        <div class="tfnc3" id="tx0">F0</div>
                        <div class="tfnc4"><img id="fx0" src="cwfbutg0.png" onclick="locofuncclick('x0');"></div>
                    </div>
                </td><td class="tfnc1" id="bx2">
                <div class="tfnc2">
                    <div class="tfnc3" id="tx2">F2</div>
                    <div class="tfnc4"><img id="fx2" src="cwfbutg0.png" onclick="locofuncclick('x2');"></div>
                </div>
            </td><td class="tfnc1" id="bx4">
                <div class="tfnc2">
                    <div class="tfnc3" id="tx4">F4</div>
                    <div class="tfnc4"><img id="fx4" src="cwfbutg0.png" onclick="locofuncclick('x4');"></div>
                </div>
            </td><td class="tfnc1" id="bx6">
                <div class="tfnc2">
                    <div class="tfnc3" id="tx6">F6</div>
                    <div class="tfnc4"><img id="fx6" src="cwfbutg0.png" onclick="locofuncclick('x6');"></div>
                </div>
            </td><td class="tfnc1" id="bx8">
                <div class="tfnc2">
                    <div class="tfnc3" id="tx8">F8</div>
                    <div class="tfnc4"><img id="fx8" src="cwfbutg0.png" onclick="locofuncclick('x8');"></div>
                </div>
            </td></tr><tr>
            <td class="tfnc1" id="bx1">
                <div class="tfnc2">
                    <div class="tfnc3" id="tx1">F1</div>
                    <div class="tfnc4"><img id="fx1" src="cwfbutg0.png" onclick="locofuncclick('x1');"></div>
                </div>
            </td><td class="tfnc1" id="bx3">
            <div class="tfnc2">
                <div class="tfnc3" id="tx3">F3</div>
                <div class="tfnc4"><img id="fx3" src="cwfbutg0.png" onclick="locofuncclick('x3');"></div>
            </div>
        </td><td class="tfnc1" id="bx5">
            <div class="tfnc2">
                <div class="tfnc3" id="tx5">F5</div>
                <div class="tfnc4"><img id="fx5" src="cwfbutg0.png" onclick="locofuncclick('x5');"></div>
            </div>
        </td><td class="tfnc1" id="bx7">
            <div class="tfnc2">
                <div class="tfnc3" id="tx7">F7</div>
                <div class="tfnc4"><img id="fx7" src="cwfbutg0.png" onclick="locofuncclick('x7');"></div>
            </div>
        </td><td class="tfnc1" id="bx9">
            <div class="tfnc2">
                <div class="tfnc3" id="tx9">F9</div>
                <div class="tfnc4"><img id="fx9" src="cwfbutg0.png" onclick="locofuncclick('x9');"></div>
            </div>
        </td></tr>
        </table>
        <div class="tgapr"></div>
        <div class="tstp" id="bx30">
            <div class="tstp1"><b>Stop</b></div>
            <div class="tstp2"><img id="fx30" src="cwsbutr0.png" onclick="locostopclick('x');"></div>
        </div>
    </div>
    <div class="tgapv"></div>
    <!-- Throttle 2 ('y') -->
    <div class="throt">
        <div class="tsel" onclick="locoselectclick('y');">
            <img class="tsel0" id="lociy" src="loco_none.png">
            <div class="tsel1" id="locoy"><b>Select Loco</b></div>
            <div class="tsel2" id="addry"></div>
        </div>
        <div class="tgaph"></div>
        <div class="tdir" id="by29">
            <div class="tdir1"><img id="fy29" src="Direction0.png" onclick="locodirectionclick('y',true);"></div>
            <div class="tdir2" id="lspdy">0</div>
        </div>
        <div class="tgaph"></div>
        <div class="tspd" id="by31">
            <input id="speedy" style="height:100%; width:100%; background-color:oldlace;" min="0" max="128" oninput="locospeedchange('y',this.value)" type="range">
        </div>
        <table class="tfnc">
            <tr>
                <td class="tfnc1" id="by0">
                    <div class="tfnc2">
                        <div class="tfnc3" id="ty0">F0</div>
                        <div class="tfnc4"><img id="fy0" src="cwfbutg0.png" onclick="locofuncclick('y0');"></div>
                    </div>
                </td><td class="tfnc1" id="by2">
                <div class="tfnc2">
                    <div class="tfnc3" id="ty2">F2</div>
                    <div class="tfnc4"><img id="fy2" src="cwfbutg0.png" onclick="locofuncclick('y2');"></div>
                </div>
            </td><td class="tfnc1" id="by4">
                <div class="tfnc2">
                    <div class="tfnc3" id="ty4">F4</div>
                    <div class="tfnc4"><img id="fy4" src="cwfbutg0.png" onclick="locofuncclick('y4');"></div>
                </div>
            </td><td class="tfnc1" id="by6">
                <div class="tfnc2">
                    <div class="tfnc3" id="ty6">F6</div>
                    <div class="tfnc4"><img id="fy6" src="cwfbutg0.png" onclick="locofuncclick('y6');"></div>
                </div>
            </td><td class="tfnc1" id="by8">
                <div class="tfnc2">
                    <div class="tfnc3" id="ty8">F8</div>
                    <div class="tfnc4"><img id="fy8" src="cwfbutg0.png" onclick="locofuncclick('y8');"></div>
                </div>
            </td></tr><tr>
            <td class="tfnc1" id="by1">
                <div class="tfnc2">
                    <div class="tfnc3" id="ty1">F1</div>
                    <div class="tfnc4"><img id="fy1" src="cwfbutg0.png" onclick="locofuncclick('y1');"></div>
                </div>
            </td><td class="tfnc1" id="by3">
            <div class="tfnc2">
                <div class="tfnc3" id="ty3">F3</div>
                <div class="tfnc4"><img id="fy3" src="cwfbutg0.png" onclick="locofuncclick('y3');"></div>
            </div>
        </td><td class="tfnc1" id="by5">
            <div class="tfnc2">
                <div class="tfnc3" id="ty5">F5</div>
                <div class="tfnc4"><img id="fy5" src="cwfbutg0.png" onclick="locofuncclick('y5');"></div>
            </div>
        </td><td class="tfnc1" id="by7">
            <div class="tfnc2">
                <div class="tfnc3" id="ty7">F7</div>
                <div class="tfnc4"><img id="fy7" src="cwfbutg0.png" onclick="locofuncclick('y7');"></div>
            </div>
        </td><td class="tfnc1" id="by9">
            <div class="tfnc2">
                <div class="tfnc3" id="ty9">F9</div>
                <div class="tfnc4"><img id="fy9" src="cwfbutg0.png" onclick="locofuncclick('y9');"></div>
            </div>
        </td></tr></table>
        <div class="tgapr"></div>
        <div class="tstp" id="by30">
            <div class="tstp1"><b>Stop</b></div>
            <div class="tstp2"><img id="fy30" src="cwsbutr0.png" onclick="locostopclick('y');"></div>
        </div>
    </div>
    <div class="tgapv"></div>
    <!-- Initially Invisible Panel for Selection -->
    <div id="overlay">
    </div>
</div>
</body>
</html>
